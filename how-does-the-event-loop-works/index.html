<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><style data-href="/app.1d1f7f5a6cc758819773.css">code[class*=language-],pre[class*=language-]{color:#fff;background:none;font-family:Consolas,Menlo,Monaco,source-code-pro,Courier New,monospace;-webkit-font-feature-settings:normal;font-feature-settings:normal;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;margin-bottom:0;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-ms-hyphens:none;hyphens:none}pre[class*=language-]{overflow:auto;padding:1em}pre[class*=language-]::selection{background:#27292a}pre[class*=language-]::selection,pre[class*=language-] ::selection{text-shadow:none;background:hsla(0,0%,100%,.15)}:not(pre)>code[class*=language-]{border-radius:.3em;background:rgba(255,229,100,.2);color:#1a1a1a;padding:.15em .2em .05em;white-space:normal}.token.attr-name{color:#addb67;font-style:italic}.token.comment{color:#637777}.token.string,.token.url{color:#addb67}.token.variable{color:#d6deeb}.token.number{color:#f78c6c}.token.builtin,.token.char,.token.constant,.token.function{color:#82aaff}.token.punctuation{color:#c792ea}.token.doctype,.token.selector{color:#c792ea;font-style:"italic"}.token.class-name{color:#ffcb8b}.token.keyword,.token.operator,.token.tag{color:#ffa7c4}.token.boolean{color:#ff5874}.token.property{color:#80cbc4}.token.namespace{color:#b2ccd6}pre[data-line]{padding:1em 0 1em 3em;position:relative}.gatsby-highlight-code-line{background-color:#022a4b;display:block;margin-right:-1em;margin-left:-1em;padding-right:1em;padding-left:.75em;border-left:.25em solid #ffa7c4}.gatsby-highlight{margin-bottom:1.75rem;border-radius:10px;background:#011627;-webkit-overflow-scrolling:touch;overflow:auto}.gatsby-highlight pre[class*=language-]{float:left;min-width:100%}</style><style data-href="/1.bddaef654c66ded1434d.css">@font-face{font-family:Montserrat;font-style:normal;font-display:swap;font-weight:100;src:local("Montserrat Thin "),local("Montserrat-Thin"),url(/static/montserrat-latin-100-50d279861fb3cbfed809eae6ed8b9ac9.woff2) format("woff2"),url(/static/montserrat-latin-100-5e334eff013f12fbb8ed72c2a253f119.woff) format("woff")}@font-face{font-family:Montserrat;font-style:italic;font-display:swap;font-weight:100;src:local("Montserrat Thin italic"),local("Montserrat-Thinitalic"),url(/static/montserrat-latin-100italic-8c0705336558194799a8729840d7ed9d.woff2) format("woff2"),url(/static/montserrat-latin-100italic-03e19243272affe738654a157625ec26.woff) format("woff")}@font-face{font-family:Montserrat;font-style:normal;font-display:swap;font-weight:200;src:local("Montserrat Extra Light "),local("Montserrat-Extra Light"),url(/static/montserrat-latin-200-4343d3d91a9446226e7a8bbb024111ad.woff2) format("woff2"),url(/static/montserrat-latin-200-f2022ecd65a0703ec3edcb7641709a75.woff) format("woff")}@font-face{font-family:Montserrat;font-style:italic;font-display:swap;font-weight:200;src:local("Montserrat Extra Light italic"),local("Montserrat-Extra Lightitalic"),url(/static/montserrat-latin-200italic-116c4c4b14ef76b0555da09854512022.woff2) format("woff2"),url(/static/montserrat-latin-200italic-89614a6008fc5c60739012463d0ee7e6.woff) format("woff")}@font-face{font-family:Montserrat;font-style:normal;font-display:swap;font-weight:300;src:local("Montserrat Light "),local("Montserrat-Light"),url(/static/montserrat-latin-300-d2ad295b60682a6537c358e06ea80c61.woff2) format("woff2"),url(/static/montserrat-latin-300-3a371ee0d175f5c2b15ce1d6b981dc4e.woff) format("woff")}@font-face{font-family:Montserrat;font-style:italic;font-display:swap;font-weight:300;src:local("Montserrat Light italic"),local("Montserrat-Lightitalic"),url(/static/montserrat-latin-300italic-f6b6bf2431003f8142e800f9df157989.woff2) format("woff2"),url(/static/montserrat-latin-300italic-16521668f5f238098329cdd7d27c391e.woff) format("woff")}@font-face{font-family:Montserrat;font-style:normal;font-display:swap;font-weight:400;src:local("Montserrat Regular "),local("Montserrat-Regular"),url(/static/montserrat-latin-400-240a84447b78da0920fcb07e378f2c5f.woff2) format("woff2"),url(/static/montserrat-latin-400-b20cc131034316b1c85d0498fb9ed5c5.woff) format("woff")}@font-face{font-family:Montserrat;font-style:italic;font-display:swap;font-weight:400;src:local("Montserrat Regular italic"),local("Montserrat-Regularitalic"),url(/static/montserrat-latin-400italic-86172bb829de6be08b92512096b6aca6.woff2) format("woff2"),url(/static/montserrat-latin-400italic-9405e78785a55cf0e4ea7669d4616ea9.woff) format("woff")}@font-face{font-family:Montserrat;font-style:normal;font-display:swap;font-weight:500;src:local("Montserrat Medium "),local("Montserrat-Medium"),url(/static/montserrat-latin-500-fb8d6b71dbe8d9294be43082936f649e.woff2) format("woff2"),url(/static/montserrat-latin-500-50825d47af7ae47e055018eb689c6c99.woff) format("woff")}@font-face{font-family:Montserrat;font-style:italic;font-display:swap;font-weight:500;src:local("Montserrat Medium italic"),local("Montserrat-Mediumitalic"),url(/static/montserrat-latin-500italic-c0a555a4f8e997385a3eebbd4da0b9ee.woff2) format("woff2"),url(/static/montserrat-latin-500italic-635de59c4be86285b1f70068c95b9816.woff) format("woff")}@font-face{font-family:Montserrat;font-style:normal;font-display:swap;font-weight:600;src:local("Montserrat SemiBold "),local("Montserrat-SemiBold"),url(/static/montserrat-latin-600-d5615136a08cfee70deb4be1ee1651df.woff2) format("woff2"),url(/static/montserrat-latin-600-f300da4fb4fe00e23915f62b2c643681.woff) format("woff")}@font-face{font-family:Montserrat;font-style:italic;font-display:swap;font-weight:600;src:local("Montserrat SemiBold italic"),local("Montserrat-SemiBolditalic"),url(/static/montserrat-latin-600italic-10f29d139edacde92df63374c5672568.woff2) format("woff2"),url(/static/montserrat-latin-600italic-2bc37d86a4ba12ce526c4af904a9946e.woff) format("woff")}@font-face{font-family:Montserrat;font-style:normal;font-display:swap;font-weight:700;src:local("Montserrat Bold "),local("Montserrat-Bold"),url(/static/montserrat-latin-700-7d77e1f03eefc452dab14d7f89080083.woff2) format("woff2"),url(/static/montserrat-latin-700-81826529772e52f0f14a4c73c2f2c7f1.woff) format("woff")}@font-face{font-family:Montserrat;font-style:italic;font-display:swap;font-weight:700;src:local("Montserrat Bold italic"),local("Montserrat-Bolditalic"),url(/static/montserrat-latin-700italic-1dd2b53f1567a29e0505de9b27c4352c.woff2) format("woff2"),url(/static/montserrat-latin-700italic-c162d257f5e9f9b108a96a604cfb2132.woff) format("woff")}@font-face{font-family:Montserrat;font-style:normal;font-display:swap;font-weight:800;src:local("Montserrat ExtraBold "),local("Montserrat-ExtraBold"),url(/static/montserrat-latin-800-d4e7bf86bbd8e5f43ca73fa831218648.woff2) format("woff2"),url(/static/montserrat-latin-800-895aadbff357be35ac8dd107c7975ee7.woff) format("woff")}@font-face{font-family:Montserrat;font-style:italic;font-display:swap;font-weight:800;src:local("Montserrat ExtraBold italic"),local("Montserrat-ExtraBolditalic"),url(/static/montserrat-latin-800italic-fc0cbe442f7b3733c91e982e825c4daa.woff2) format("woff2"),url(/static/montserrat-latin-800italic-b3362875067300abedb7a8fb97903258.woff) format("woff")}@font-face{font-family:Montserrat;font-style:normal;font-display:swap;font-weight:900;src:local("Montserrat Black "),local("Montserrat-Black"),url(/static/montserrat-latin-900-c8bdd772c0d1347720ff7e3fb72719f3.woff2) format("woff2"),url(/static/montserrat-latin-900-1b99ef78e627dd9bbd0ca4b5c0789547.woff) format("woff")}@font-face{font-family:Montserrat;font-style:italic;font-display:swap;font-weight:900;src:local("Montserrat Black italic"),local("Montserrat-Blackitalic"),url(/static/montserrat-latin-900italic-cb72c1f90f66c124fb897a75bec64c78.woff2) format("woff2"),url(/static/montserrat-latin-900italic-b78bb9f8ecec6c5a924c873f1818095f.woff) format("woff")}@font-face{font-family:Merriweather;font-style:normal;font-display:swap;font-weight:300;src:local("Merriweather Light "),local("Merriweather-Light"),url(/static/merriweather-latin-300-f015f1e9a46a3b9db4fd64564dacece4.woff2) format("woff2"),url(/static/merriweather-latin-300-92dfe81b725c342d31d962da975c07a6.woff) format("woff")}@font-face{font-family:Merriweather;font-style:italic;font-display:swap;font-weight:300;src:local("Merriweather Light italic"),local("Merriweather-Lightitalic"),url(/static/merriweather-latin-300italic-7fd86b32accf2df4403d1d4fa3a81502.woff2) format("woff2"),url(/static/merriweather-latin-300italic-878b76f59d5ba58dd1652dc8d2a0f4f9.woff) format("woff")}@font-face{font-family:Merriweather;font-style:normal;font-display:swap;font-weight:400;src:local("Merriweather Regular "),local("Merriweather-Regular"),url(/static/merriweather-latin-400-12dbf4c00ae43698f278b099e4b0ec9e.woff2) format("woff2"),url(/static/merriweather-latin-400-1fffad22b085a877995812dbf1d9ac08.woff) format("woff")}@font-face{font-family:Merriweather;font-style:italic;font-display:swap;font-weight:400;src:local("Merriweather Regular italic"),local("Merriweather-Regularitalic"),url(/static/merriweather-latin-400italic-1e0d3e8121d88969bfb153c8f174b758.woff2) format("woff2"),url(/static/merriweather-latin-400italic-de18d4c4e8e808a7248a185f866ff094.woff) format("woff")}@font-face{font-family:Merriweather;font-style:normal;font-display:swap;font-weight:700;src:local("Merriweather Bold "),local("Merriweather-Bold"),url(/static/merriweather-latin-700-dc8fec81a125fc63856587e6683da73b.woff2) format("woff2"),url(/static/merriweather-latin-700-d7d2ed8e58f303392cc3fc00ba3a9186.woff) format("woff")}@font-face{font-family:Merriweather;font-style:italic;font-display:swap;font-weight:700;src:local("Merriweather Bold italic"),local("Merriweather-Bolditalic"),url(/static/merriweather-latin-700italic-b7b7e5da4d7be8c12bd5a6c809edc8fc.woff2) format("woff2"),url(/static/merriweather-latin-700italic-6210a5fc1c54ca85a5d82aa85d7a9b5c.woff) format("woff")}@font-face{font-family:Merriweather;font-style:normal;font-display:swap;font-weight:900;src:local("Merriweather Black "),local("Merriweather-Black"),url(/static/merriweather-latin-900-43f870d543dd89fbeb66d417c0d97276.woff2) format("woff2"),url(/static/merriweather-latin-900-8f3806df74937c7b8b53f24ae1e725d1.woff) format("woff")}@font-face{font-family:Merriweather;font-style:italic;font-display:swap;font-weight:900;src:local("Merriweather Black italic"),local("Merriweather-Blackitalic"),url(/static/merriweather-latin-900italic-168c1ab28ed0e4e7d654334def288bc1.woff2) format("woff2"),url(/static/merriweather-latin-900italic-ae7778f01871e35ee142ef207b313b34.woff) format("woff")}</style><meta name="generator" content="Gatsby 2.0.67"/><link rel="alternate" type="application/rss+xml" href="/rss.xml"/><link rel="shortcut icon" href="/icons/icon-48x48.png"/><link rel="manifest" href="/manifest.webmanifest"/><meta name="theme-color" content="#ffa7c4"/><title data-react-helmet="true">Tasks, microtasks and queues - Reactified</title><meta data-react-helmet="true" name="description" content="We talk about queues, tasks &amp; micro tasks"/><meta data-react-helmet="true" property="og:url" content="https://reactified.io/how-does-the-event-loop-works/"/><meta data-react-helmet="true" property="og:title" content="Tasks, microtasks and queues"/><meta data-react-helmet="true" name="og:description" content="We talk about queues, tasks &amp; micro tasks"/><meta data-react-helmet="true" name="twitter:card" content="summary"/><meta data-react-helmet="true" name="twitter:creator" content="@talaviss"/><meta data-react-helmet="true" name="twitter:title" content="Tasks, microtasks and queues"/><meta data-react-helmet="true" name="twitter:description" content="We talk about queues, tasks &amp; micro tasks"/><style id="typography.js">html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}body{margin:0}article,aside,details,figcaption,figure,footer,header,main,menu,nav,section,summary{display:block}audio,canvas,progress,video{display:inline-block}audio:not([controls]){display:none;height:0}progress{vertical-align:baseline}[hidden],template{display:none}a{background-color:transparent;-webkit-text-decoration-skip:objects}a:active,a:hover{outline-width:0}abbr[title]{border-bottom:none;text-decoration:underline;text-decoration:underline dotted}b,strong{font-weight:inherit;font-weight:bolder}dfn{font-style:italic}h1{font-size:2em;margin:.67em 0}mark{background-color:#ff0;color:#000}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}img{border-style:none}svg:not(:root){overflow:hidden}code,kbd,pre,samp{font-family:monospace,monospace;font-size:1em}figure{margin:1em 40px}hr{box-sizing:content-box;height:0;overflow:visible}button,input,optgroup,select,textarea{font:inherit;margin:0}optgroup{font-weight:700}button,input{overflow:visible}button,select{text-transform:none}[type=reset],[type=submit],button,html [type=button]{-webkit-appearance:button}[type=button]::-moz-focus-inner,[type=reset]::-moz-focus-inner,[type=submit]::-moz-focus-inner,button::-moz-focus-inner{border-style:none;padding:0}[type=button]:-moz-focusring,[type=reset]:-moz-focusring,[type=submit]:-moz-focusring,button:-moz-focusring{outline:1px dotted ButtonText}fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}legend{box-sizing:border-box;color:inherit;display:table;max-width:100%;padding:0;white-space:normal}textarea{overflow:auto}[type=checkbox],[type=radio]{box-sizing:border-box;padding:0}[type=number]::-webkit-inner-spin-button,[type=number]::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}[type=search]::-webkit-search-cancel-button,[type=search]::-webkit-search-decoration{-webkit-appearance:none}::-webkit-input-placeholder{color:inherit;opacity:.54}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}html{font:100%/1.75 'Merriweather','Georgia',serif;box-sizing:border-box;overflow-y:scroll;}*{box-sizing:inherit;}*:before{box-sizing:inherit;}*:after{box-sizing:inherit;}body{color:hsla(0,0%,0%,0.9);font-family:'Merriweather','Georgia',serif;font-weight:400;word-wrap:break-word;font-kerning:normal;-moz-font-feature-settings:"kern", "liga", "clig", "calt";-ms-font-feature-settings:"kern", "liga", "clig", "calt";-webkit-font-feature-settings:"kern", "liga", "clig", "calt";font-feature-settings:"kern", "liga", "clig", "calt";}img{max-width:100%;margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}h1{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;color:inherit;font-family:Montserrat,sans-serif;font-weight:900;text-rendering:optimizeLegibility;font-size:2.5rem;line-height:1.1;}h2{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;color:inherit;font-family:'Merriweather','Georgia',serif;font-weight:900;text-rendering:optimizeLegibility;font-size:1.73286rem;line-height:1.1;}h3{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;color:inherit;font-family:'Merriweather','Georgia',serif;font-weight:900;text-rendering:optimizeLegibility;font-size:1.4427rem;line-height:1.1;}h4{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;color:inherit;font-family:'Merriweather','Georgia',serif;font-weight:900;text-rendering:optimizeLegibility;font-size:1rem;line-height:1.1;letter-spacing:0.140625em;text-transform:uppercase;}h5{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;color:inherit;font-family:'Merriweather','Georgia',serif;font-weight:900;text-rendering:optimizeLegibility;font-size:0.83255rem;line-height:1.1;}h6{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;color:inherit;font-family:'Merriweather','Georgia',serif;font-weight:900;text-rendering:optimizeLegibility;font-size:0.75966rem;line-height:1.1;font-style:italic;}hgroup{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}ul{margin-left:1.75rem;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;list-style-position:outside;list-style-image:none;list-style:disc;}ol{margin-left:1.75rem;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;list-style-position:outside;list-style-image:none;}dl{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}dd{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}p{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}figure{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}pre{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;font-size:0.85rem;line-height:1.75rem;}table{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;font-size:1rem;line-height:1.75rem;border-collapse:collapse;width:100%;}fieldset{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}blockquote{margin-left:-1.75rem;margin-right:1.75rem;margin-top:0;padding-bottom:0;padding-left:1.42188rem;padding-right:0;padding-top:0;margin-bottom:1.75rem;font-size:1.20112rem;line-height:1.75rem;color:hsla(0,0%,0%,0.59);font-style:italic;border-left:0.32813rem solid hsla(0,0%,0%,0.9);}form{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}noscript{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}iframe{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}hr{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:calc(1.75rem - 1px);background:hsla(0,0%,0%,0.2);border:none;height:1px;}address{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}b{font-weight:700;}strong{font-weight:700;}dt{font-weight:700;}th{font-weight:700;}li{margin-bottom:calc(1.75rem / 2);}ol li{padding-left:0;}ul li{padding-left:0;}li > ol{margin-left:1.75rem;margin-bottom:calc(1.75rem / 2);margin-top:calc(1.75rem / 2);}li > ul{margin-left:1.75rem;margin-bottom:calc(1.75rem / 2);margin-top:calc(1.75rem / 2);}blockquote *:last-child{margin-bottom:0;}li *:last-child{margin-bottom:0;}p *:last-child{margin-bottom:0;}li > p{margin-bottom:calc(1.75rem / 2);}code{font-size:0.85rem;line-height:1.75rem;}kbd{font-size:0.85rem;line-height:1.75rem;}samp{font-size:0.85rem;line-height:1.75rem;}abbr{border-bottom:1px dotted hsla(0,0%,0%,0.5);cursor:help;}acronym{border-bottom:1px dotted hsla(0,0%,0%,0.5);cursor:help;}abbr[title]{border-bottom:1px dotted hsla(0,0%,0%,0.5);cursor:help;text-decoration:none;}thead{text-align:left;}td,th{text-align:left;border-bottom:1px solid hsla(0,0%,0%,0.12);font-feature-settings:"tnum";-moz-font-feature-settings:"tnum";-ms-font-feature-settings:"tnum";-webkit-font-feature-settings:"tnum";padding-left:1.16667rem;padding-right:1.16667rem;padding-top:0.875rem;padding-bottom:calc(0.875rem - 1px);}th:first-child,td:first-child{padding-left:0;}th:last-child,td:last-child{padding-right:0;}blockquote > :last-child{margin-bottom:0;}blockquote cite{font-size:1rem;line-height:1.75rem;color:hsla(0,0%,0%,0.9);font-weight:400;}blockquote cite:before{content:"— ";}ul,ol{margin-left:0;}@media only screen and (max-width:480px){ul,ol{margin-left:1.75rem;}blockquote{margin-left:-1.3125rem;margin-right:0;padding-left:0.98438rem;}}h1,h2,h3,h4,h5,h6{margin-top:3.5rem;}a{box-shadow:0 1px 0 0 currentColor;color:#3366ff;text-decoration:none;}a:hover,a:active{box-shadow:none;}mark,ins{background:#007acc;color:white;padding:0.10938rem 0.21875rem;text-decoration:none;}a.gatsby-resp-image-link{box-shadow:none;}p code{font-size:1.1rem;}</style><link as="script" rel="preload" href="/component---src-templates-blog-post-js-0830e95464a0cb316e47.js"/><link as="script" rel="preload" href="/1-9249eaf00c69d6d3fc55.js"/><link as="script" rel="preload" href="/0-706104f60afff9caae63.js"/><link as="script" rel="preload" href="/app-f29fcb3d985d090ccc0c.js"/><link as="script" rel="preload" href="/webpack-runtime-dfb3c058fccf223b8f2f.js"/><link rel="preload" href="/static/d/263/path---how-does-the-event-loop-works-fc-6-552-UlsD3TtNYcQm694sytn60BygEf4.json" as="fetch" crossOrigin="use-credentials"/></head><body><div id="___gatsby"><div style="outline:none" tabindex="-1" role="group"><div style="margin-left:auto;margin-right:auto;max-width:42rem;padding:2.625rem 1.3125rem"><h3 style="font-family:Montserrat, sans-serif;margin-top:0;margin-bottom:-1.75rem"><a style="box-shadow:none;text-decoration:none;color:#ffa7c4" href="/">Reactified</a></h3><h1>Tasks, microtasks and queues</h1><p style="font-size:0.83255rem;line-height:1.75rem;display:block;margin-bottom:1.75rem;margin-top:-1.75rem">December 26, 2018<!-- --> • ☕️ 2 min read</p><div><p>The workings of the JavaScript dispatch queue are more subtle and interesting than you might think. Far from just being a queue of events, there are tasks and then there are sub-tasks.</p>
<p>Lets look on this Javascript code</p>
<h3>Tasks and Microtasks</h3>
<p>Our earlier description of the event or dispatch queue is slightly over-simplified. Now that we have explored many of the possible ways of working with the queue it is time to find out some finer points of how it works.</p>
<p>It is clear that each thread of execution gets its own queue. All of the windows from a single origin share the same queue, and this is used by the postMessage method to allow them to communicate.</p>
<p>Tasks are originally the only thing placed in the event queue, but modern JavaScript and browsers also now support microtasks.</p>
<p>The event loop takes tasks one at a time and allows the task to run to completion before the next task is serviced. Tasks can also be preferentially dequeued according to their source. This allows the system to prioritize some tasks.</p>
<p>A subtle, but sometimes important point is that the browser may render updates to the page between servicing tasks. This is important because if your code makes changes to the page you will generally only see these changes if you allow the UI thread to service the queue and there has to be a task waiting for it to perform the update.</p>
<p>Microtasks were introduced partly as a lightweight version of the task, but more to introduce a new class of task that was guaranteed to be executed before the next task starts i.e. as soon as possible</p>
<h3>Tasks and Microtasks</h3>
<p>Consider following code:</p>
<div class="gatsby-highlight" data-language="jsx"><pre class="language-jsx"><code class="language-jsx">console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'script start'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'setTimeout'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

Promise<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'promise1'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'promise2'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'script end'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<p>In what order should the logs appear?</p>
<p>The correct answer: script start, script end, promise1, promise2, setTimeout, but it’s really depends on the type of browser you’re using.</p>
<p>Microsoft Edge, Firefox 40, iOS Safari and desktop Safari 8.0.8 log setTimeout before promise1 and promise2 - although it appears to be a race condition. This is really weird, as Firefox 39 and Safari 8.0.7 get it consistently right.</p>
<p>To be continued …</p></div><p><a href="https://medium.com/talaviss" target="_blank" rel="noopener noreferrer">Medium stories</a></p><hr style="margin-bottom:1.75rem"/><h3 style="font-family:Montserrat, sans-serif;margin-top:0.4375rem"><a style="box-shadow:none;text-decoration:none;color:#ffa7c4" href="/">Reactified</a></h3><div style="display:flex;margin-bottom:4.375rem"><img src="data:image/jpeg;base64,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" alt="Tal Avissar" style="margin-right:0.875rem;margin-bottom:0;width:3.5rem;height:3.5rem"/><p style="max-width:310px">Personal blog by <a href="https://mobile.twitter.com/talaviss">Tal Avissar</a>.<!-- --> <!-- -->I explain with words and code.</p></div><ul style="display:flex;flex-wrap:wrap;justify-content:space-between;list-style:none;padding:0"><li><a rel="prev" href="/private-and-public-class-fields/">← <!-- -->Public and private class fields</a></li><li><a rel="next" href="/how-to-use-rxjs-with-react/">Rxjs explained and how to use with React<!-- --> →</a></li></ul></div></div></div><script>
  
  
  if(true) {
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
  }
  if (typeof ga === "function") {
    ga('create', 'UA-130227707-1', 'auto', {});
      
      }
      </script><script id="gatsby-script-loader">/*<![CDATA[*/window.page={"componentChunkName":"component---src-templates-blog-post-js","jsonName":"how-does-the-event-loop-works-fc6","path":"/how-does-the-event-loop-works/"};window.dataPath="263/path---how-does-the-event-loop-works-fc-6-552-UlsD3TtNYcQm694sytn60BygEf4";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"app":["/app.1d1f7f5a6cc758819773.css","/app-f29fcb3d985d090ccc0c.js"],"component---src-templates-blog-post-js":["/component---src-templates-blog-post-js-0830e95464a0cb316e47.js"],"component---src-pages-404-js":["/component---src-pages-404-js-261542f94897fe59567a.js"],"component---src-pages-index-js":["/component---src-pages-index-js-bbad471c3fb78f9de245.js"]};/*]]>*/</script><script src="/webpack-runtime-dfb3c058fccf223b8f2f.js" async=""></script><script src="/app-f29fcb3d985d090ccc0c.js" async=""></script><script src="/0-706104f60afff9caae63.js" async=""></script><script src="/1-9249eaf00c69d6d3fc55.js" async=""></script><script src="/component---src-templates-blog-post-js-0830e95464a0cb316e47.js" async=""></script></body></html>